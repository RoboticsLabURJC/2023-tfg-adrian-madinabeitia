---
title: "Semana 3 - Rosbags + pytorch"
categories:
  - Weekly Log
tags:
  - github pages
  - gazebo
  - ROS2
  - Aerostack2
  - pytorch
---

En esta semana comenzaremos a familiarizarnos a entrenar con un database de rosbags en pytorch. 

## Simulación formula1 sigue lineas
Como aún tenemos problemas con la simulación del drone, empezamos a familiarizarnos con la obtención de conjuntos de datos a partir del mismo ejercicio, pero realizado en un vehículo terrestre. Para hacer el seguimiento de líneas, aprovechamos el código de la asignatura de (robótica de servicio)[https://portanova2002.wixsite.com/robotica-movil/blank-1] del año pasado. Solo tuvimos que adaptar el código de Unibotics a ROS.

## Entrenamiento
### Rosbags
Para obtener el conjunto de datos, utilizamos el siguiente comando:

```bash
ros2 bag record /filtered_img /cmd_vel
```

Solo guardaremos los temas **/filtered_img** y **/cmd_vel**, ya que lo que nos interesa saber es qué velocidades se comandan dependiendo de la imagen; en otras palabras, la entrada sería la imagen y la salida las velocidades del robot.

Al ejecutar el camando tendremos un .yaml con el metadata y un archivo .db3 donde estarán todos los datos guardados.

Para ver qué había dentro del .sdb3, nos descargamos la siguiente (aplicación)[https://sqlitebrowser.org/dl/] e investigamos un poco el SQL.

### pyTorch
#### Dataset
El primer paso a la hora de entrenar una red neuronal es generar el conjunto de datos. Ya lo conseguimos con las rosbags; ahora nos queda dejarlo en un formato que pueda leer PyTorch. Esta respuesta la encontramos en (Stack Overflow)[https://stackoverflow.com/questions/73420147/how-to-read-custom-message-type-using-ros2bag], donde se intentan leer mensajes personalizados, pero con la parte de mensajes estándar nos basta. A partir de este código, accedemos a los parámetros que nos interesan: la matriz de la imagen y la velocidad lineal en el eje x junto con la velocidad angular en el eje z.

#### pyTorch
Después, seguimos leyendo varios tutoriales de PyTorch para familiarizarnos con el mismo. Como por el momento, no sabía qué red neuronal o técnica de machine learning aplicar, me centré en comprender cómo funciona y en un estudio un poco más teórico.

## Plataforma tello
También seguimos con los problemas de la semana pasada; lo primero a corregir es el problema de las transformaciones (tfs).

## Links utilizados:
* https://file.org/extension/db3
* https://pytorch.org/tutorials/beginner/introyt/trainingyt.html
